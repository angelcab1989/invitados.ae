<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lista de Invitados</title>
  <style>

	:root{
	  --paper-base: linear-gradient(
			to bottom,
			rgb(223, 210, 190) 0%,
			rgb(255, 245, 225) 100%
		);
	}

	html, body {
	  height: 100%;
	  margin: 0;
	}

	.paper{
	  min-height: 100%;
	  padding: 4rem 2rem;

	  background-image: 
		radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.2), transparent 70%),
		radial-gradient(circle at 70% 80%, rgba(0, 0, 0, 0.08), transparent 60%),
		repeating-linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0px, rgba(255, 255, 255, 0.05) 3px, transparent 3px, transparent 8px),
		repeating-linear-gradient(45deg, rgba(0, 0, 0, 0.02) 0px, rgba(0, 0, 0, 0.02) 2px, transparent 2px, transparent 6px);
	  background-blend-mode: multiply;
	  box-shadow: inset 0 0 90px rgba(0, 0, 0, 0.15);
	  font-family: "Georgia", serif;
	  color: #333;
	}

	.logo-corner {
	  position: fixed;
	  bottom: 20px;   /* separación desde abajo */
	  right: 20px;    /* separación desde la derecha */
	  width: 160px;   /* ajusta el tamaño según necesites */
	  height: auto;
	  opacity: 0.85;  /* un poco translúcido si quieres elegancia */
	  pointer-events: none; /* evita que bloquee clics */
	  z-index: 100;   /* siempre encima del contenido */
	  transition: bottom 0.4s cubic-bezier(.4,0,.2,1);
	}
	
	/* Ocultar en pantallas de 600px o menos */
	@media (max-width: 600px) {
	  .logo-corner {
			display: block;
			position: static;
			width: 100%;
			max-width: 180px;
			margin: 32px auto 0 auto;
			left: auto;
			right: auto;
			bottom: auto;
			opacity: 1;
			z-index: 100;
			padding: 12px 0;
    		border-radius: 12px;
		}
	}

    table { border-collapse: collapse; width: 100%; max-width: 600px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { 
		background: linear-gradient(
		  to bottom,
		  rgb(160, 180, 100) 0%,
		  rgba(160, 180, 100, 0) 100%
		);
		
	}
	
	/* Esquina superior izquierda */
	th:first-child {
	  border-top-left-radius: 15px;
	 
	}

	/* Esquina superior derecha */
	th:last-child {
	  border-top-right-radius: 15px;
	  
	}

	div.dt-container {
		margin: 0 auto;
		width: 100%;
	}
	
	#resumen_mesas { 
		border-collapse: collapse; 
		margin: 0 auto;
		width: 80%;
	}

	#resumen_mesas tbody tr { 
		border-bottom: 1px solid #ccc; 
	}

	#resumen_mesas thead tr { 
		border-bottom: none; 
	}

	tbody tr:hover {
		background-color: #dddddda6;
	}

  </style>
  <!-- <link href="https://cdn.datatables.net/2.3.0/css/dataTables.dataTables.min.css" type="text/css" /> -->
  <!-- Bootstrap 5 CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<!-- DataTables con estilo Bootstrap -->
<link rel="stylesheet" href="https://cdn.datatables.net/2.3.0/css/dataTables.bootstrap5.min.css">
    
  <script src="https://code.jquery.com/jquery-3.7.1.js" type="text/javascript"></script>
  <script src="https://cdn.datatables.net/2.3.0/js/dataTables.min.js" type="text/javascript"></script>
  
  <!-- Bootstrap JS bundle -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	<!-- DataTables con Bootstrap -->
	<script src="https://cdn.datatables.net/2.3.0/js/dataTables.bootstrap5.min.js"></script>
  
  <script>
  document.addEventListener('DOMContentLoaded', function () {
	var dataSet = [
		['Engely Perez', 'Mesa',1],
		['Angel Cabrera', 'Mesa',1],
		['Bruno Cabrera', 'Mesa',1], //niñ@
		['Engelbert Perez', 'Mesa',1],
		['Maria Medina', 'Mesa',1],
		['Genesis Perez', 'Mesa',1],
		['Jean Franco Sumavila', 'Mesa',1],
		['Xiomara Gonzalez', 'Mesa',1],
		['Jorge Cabrera', 'Mesa',1],
		['Jorge Cabrera Jr', 'Mesa',1],
		['Paola Rivero', 'Mesa',1],
		['Arturo Navas', 'Mesa',1],
		
		['Manuel Rodriguez', 'Mesa',2],
		['Marian Delgado', 'Mesa',2],
		['Helena Rodríguez', 'Mesa',2], //niñ@
		['Roman Valenzuela', 'Mesa',2],
		['Blanca Gonzalez', 'Mesa',2],
		['Jesus David Valenzuela', 'Mesa',2],
		
		
		['Engimar Perez', 'Mesa',3],
		['Wendy Liendo', 'Mesa',3],
		['Javier Betancourt', 'Mesa',3],
		['Sybaris Corona', 'Mesa',3],
		['Jesus Acevedo', 'Mesa',3],
		['Albert Acevedo', 'Mesa',3],
				
		['Zuleidy Reyes', 'Mesa',4],
		['Emily Medina', 'Mesa',4],
		['Jorge Liendo', 'Mesa',4],
		['Dominga Planchart', 'Mesa',4],
		['Gaby Betancourt', 'Mesa',4],
		['Diego Izzo', 'Mesa',4],
		
		
		['Heli García', 'Mesa',5],
		['Fabian García', 'Mesa',5],
		['Isabel García', 'Mesa',5],
		['Samuel Nieve', 'Mesa',5],
		['Samuel Jr. Nieve', 'Mesa',5], //niñ@
		['Miranda Nieve', 'Mesa',5], //niñ@
		['Maritza Medina', 'Mesa',5],
		['Rodrigo Carvajal', 'Mesa',5],
		
		['Nicolas D\'Amelio', 'Mesa',6],
		['Lilibeth Achji', 'Mesa',6],
		['Amelie D\'Amelio', 'Mesa',6], //niñ@
		['Pedro Pico', 'Mesa',6],
		['Adriana Andrade', 'Mesa',6],
		['Leopoldo Soto', 'Mesa',6],
		['Albanys Silva', 'Mesa',6],
		['Martin Soto', 'Mesa',6], //niñ@
		['Francelys Heredia', 'Mesa',6],
		['Heberth Caripa', 'Mesa',6],
		
		['Liliana Uribe', 'Mesa',7],
		['Pedro Orozco', 'Mesa',7],
		['Diego Orozco', 'Mesa',7],
		['Mailyn Lozada', 'Mesa',7],
		['Francisco Peña', 'Mesa',7],
		['Rosimart Gomez', 'Mesa',7],
		['Manuel Maldonado', 'Mesa',7],
		['Orlando Pernia', 'Mesa',7],
		
		['Jorge Simoes', 'Mesa',8],
		['Kamaly Acevedo', 'Mesa',8],
		['Aleska Salas', 'Mesa',8],
		['Jose Zalem', 'Mesa',8],
		['Josue Mosquera', 'Mesa',8],
		['José Luis Muñoz', 'Mesa',8],
		['Jose Trujillo', 'Mesa',8],
		['Angel Borges', 'Mesa',8],

		['Felix Utrera', 'Mesa',9],
		['Gloryen Aponte', 'Mesa',9],
		['Felix Jr. Utrera', 'Mesa',9],
		['Giselle Utrera', 'Mesa',9], //niñ@
		['Guillermo Horno', 'Mesa',9],
		['Mariana Márquez', 'Mesa',9],
		['Federica Horno', 'Mesa',9], //niñ@
		['Juliana Horno', 'Mesa',9], //niñ@

		['Jennifer Brito', 'Mesa',10],
		['José Barrios', 'Mesa',10],
		['Esther Marquez', 'Mesa',10],
		['Pedro Rodríguez', 'Mesa',10],
		['Karla Padilla', 'Mesa',10],
		['Miguel Quintero', 'Mesa',10],
		['Maximo Quintero', 'Mesa',10], //niñ@
		['Roberto Quintero', 'Mesa',10],

		['Joel Pallotta', 'Mesa',11],
		['Andreina Sánchez', 'Mesa',11],
		['Rafael Machado', 'Mesa',11],
		['Angely Rojo', 'Mesa',11],
		['Carmen Morales', 'Mesa',11],
		['Jairo Marín', 'Mesa',11],
		['Carmina Sánchez', 'Mesa',11],
	];

		new DataTable('#lista_invitados', {
			paging: false,
			columns: [
				{ title: 'Nombre' },
				{ 
					title: 'Mesa',
					render: (tittle, type, row) => `${row[1]} ${row[2]}`
				},
				{ title: 'Order', 'visible':false }
			],
			data: dataSet,
			order: [[2, 'asc']],
			layout: {
				top: ''
			},
			language: {
				search: "Buscar invitado:",
				info: "",//"Mostrando todos los invitados",
				zeroRecords: "No se encontró ningún invitado"
			}
		});
		
		// Calcular conteo por mesa
		const conteo = {};
		dataSet.forEach(row => {
		  const mesa = row[2]; // "Mesa X"
		  conteo[mesa] = (conteo[mesa] || 0) + 1;
		});

		const totalInvitados = Object.values(conteo).reduce((sum, count) => sum + count, 0);
		$('#total_invitados').text(totalInvitados);

		// Insertar resumen en la tabla
		const tbody = document.querySelector('#resumen_mesas tbody');
		$.each(conteo, function(mesa, value){
		  const tr = document.createElement('tr');
		  tr.innerHTML = `<td>Mesa ${mesa}</td><td>${value}</td>`;
		  tbody.appendChild(tr);
		});
		
		new DataTable('#resumen_mesas', {
			paging: false,
			searching: false,
			order: false,
			layout: {
				top: ''
			},
			language: {
				search: "Buscar invitado:",
				info: "",//"Mostrando todos los invitados",
				zeroRecords: "No se encontró ningún invitado"
			}
		});
		
	});

	document.addEventListener('DOMContentLoaded', function () {
    // ...tu código DataTable...

		// Espera a que DataTable termine de renderizar
		setTimeout(function() {
			const table = document.querySelector('#lista_invitados');
			if (!table) return;
			const rows = table.querySelectorAll('tbody tr');
			let lastMesa = null;
			let lastRow = null;

			rows.forEach((row, idx) => {
				// Obtén el número de mesa desde la segunda columna (ya renderizada)
				const mesaText = row.children[1].textContent.trim();
				const mesaNum = mesaText.match(/Mesa (\d+)/) ? mesaText.match(/Mesa (\d+)/)[1] : null;

				if (lastMesa === null) {
					lastMesa = mesaNum;
					lastRow = row;
				} else if (mesaNum === lastMesa) {
					lastRow = row;
				} else {
					// Cuando cambia la mesa, pon el borde al último de la anterior
					lastRow.style.borderBottom = '1px solid #ccc';
					lastMesa = mesaNum;
					lastRow = row;
				}
			});
			// Agrega el borde al último grupo
			if (lastRow) {
				lastRow.style.borderBottom = '1px solid #ccc';
			}
		}, 300); // Espera a que DataTable termine de renderizar

		document.addEventListener('scroll', function () {
			const logo = document.querySelector('.logo-corner');
			const resumen = document.getElementById('footer_display');
			if (!logo) return;

			// Obtiene la posición del resumen respecto a la ventana
			const resumenRect = resumen.getBoundingClientRect();

			// Si el resumen está visible en la ventana (top < windowHeight)
			if (resumenRect.top < window.innerHeight && resumenRect.bottom > 0) {
				logo.style.bottom = '140px';
			} else {
				logo.style.bottom = '20px';
			}
		});
});

  </script>
</head>

<body>
	<main class="paper">
		<div style='text-align:center'>
			<h1>Boda A&E - 27 Sept. 25</h1>
			<h2>Lista de Invitados</h2>
			<table id='lista_invitados' class="display" width="100%"></table>
			
			<h2 style='margin-top:35px'>Resumen por mesa</h2>
			<table id="resumen_mesas" class="display" width="100%" >
			<thead>
				<tr>
				<th>Mesa</th>
				<th>Cantidad de Invitados</th>
				</tr>
			</thead>
			<tbody></tbody>
			<tfooter>
				<tr id="total_general">
					<td>
						<b>TOTAL GENERAL</b>
					</td>
					<td style="text-align: right; width:60%">
						<b id="total_invitados"></b>
					</td>
				</tr>
			</tfooter>
			</table>
		</div>

		<!-- Logo en la esquina inferior derecha -->
		<img src="logo-ae.png" alt="Logo AE" class="logo-corner">
		<footer style="text-align:center; margin-top:48px; font-size:0.95em; color:#555;" id="footer_display">
  				<p>¡Gracias por acompañarnos en este día tan especial! <br>
  				Si tienes alguna pregunta o necesitas más información, no nos jodas y guarda tus preguntas. <br>
  				¡Disfruten! <br><br>
  				
  				Con cariño, <br>
  				Angel & Engely</p>
  				<br>
			<hr>
  				<b>&copy; 2025 Angel & Engely.</b><br>
				Todos los derechos reservados.
		</footer>
	</main>
</body>

</html>
